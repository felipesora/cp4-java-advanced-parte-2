<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ferramentas</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <script th:src="@{/js/modal.js}" defer></script>
  </head>
  <body>
    <header class="cabecalho">
      <h1>Gestor de Ferramentas</h1>
      <a href="/ferramentas/cadastrar" class="btn btn_nova_ferramenta">Nova Ferramenta</a>
    </header>

    <main class="container_main">
      <section class="secao_filtro">
        <h2>Filtros:</h2>
        <form th:action="@{/ferramentas}" method="get" class="filtro_form">
          <input type="text" name="nome" placeholder="Filtrar por Nome"
                 th:value="${param.nome}">

          <select name="tamanho">
            <option value="">Todos os tamanhos</option>
            <option value="PEQUENO" th:selected="${param.tamanho=='PEQUENO'}">PEQUENO</option>
            <option value="MEDIO" th:selected="${param.tamanho=='MEDIO'}">MÉDIO</option>
            <option value="GRANDE" th:selected="${param.tamanho=='GRANDE'}">GRANDE</option>
          </select>

          <div class="filtro_botoes">
            <button type="submit" class="btn_filtrar">Filtrar</button>
            <a href="/ferramentas" class="btn_limpar_filtro">Limpar Filtro</a>
          </div>
        </form>
      </section>

      <section class="lista_cards">

        <p class="mensagem-vazia" th:if="${mensagemVazio}">
          Nenhuma ferramenta cadastrada ainda.
        </p>

        <p class="mensagem-vazia" th:if="${mensagemFiltro}">
          Nenhuma ferramenta encontrada com os filtros informados.
        </p>

        <article class="card" th:each="ferramenta : ${ferramentas}">
          <div class="card_cabecalho">
            <h2 th:text="${ferramenta.nome}">Nome da ferramenta</h2>
            <span th:switch="${ferramenta.tamanho.name()}">
              <span th:case="'PEQUENO'">PEQUENO</span>
              <span th:case="'MEDIO'">MÉDIO</span>
              <span th:case="'GRANDE'">GRANDE</span>
              <span th:case="*"
                    th:text="${ferramenta.tamanho}">Outro</span>
            </span>
          </div>

          <ul class="card_lista">
            <li><strong>Tipo:</strong> <span th:text="${ferramenta.tipo}"></span></li>
            <li><strong>Classificação:</strong> <span th:text="${ferramenta.classificacao}"></span></li>
            <li><strong>Preço:</strong> R$ <span th:text="${ferramenta.preco}"></span></li>
            <li><strong>Quantidade:</strong> <span th:text="${ferramenta.quantidade}"></span></li>
          </ul>

          <div class="card_botoes">
            <a th:href="@{'/ferramentas/editar/' + ${ferramenta.id}}" class="btn btn_editar">Editar</a>
            <button class="btn btn_excluir" th:onclick="'abrirModal(' + ${ferramenta.id} + ')'">Excluir</button>
          </div>
        </article>

      </section>
    </main>

    <footer class="rodape">
        <p>&copy; 2025 — Gestor de Ferramentas</p>
    </footer>

    <!-- Modal -->
    <div id="modalExcluir" class="modal">
      <div class="modal-conteudo">
        <h3>Confirmação</h3>
        <p>Tem certeza que deseja excluir esta ferramenta?</p>
        <div class="modal-botoes">
          <button id="confirmarExcluir" class="btn btn_excluir">Sim, excluir</button>
          <button onclick="fecharModal()" class="btn btn_cancelar">Cancelar</button>
        </div>
      </div>
    </div>
  </body>
</html>
